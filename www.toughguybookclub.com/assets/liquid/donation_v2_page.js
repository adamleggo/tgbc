var donationV2Page=function(n){var t,o={feePercent:.029,feeAmount:.3,currencySymbol:"$"},e=Object.assign({},o,n),a=$('[name="donation[donation_occurrence]"]'),i=$(".nb_donation_v2_interval"),r=$('[name="donation[amount_option]"]'),u=$("#donation_amount_other"),c=$("#donation_amount_other_input"),d=$(".nb_donation_v2_amount"),h=$("#donation_donor_covers_fees"),m=$('input[type="hidden"][name="donation[amount]"]').val(),l={},v=function(){return h.is(":checked")},s=function(n){var t=parseFloat(n);return(t+function(n){var t=n*e.feePercent+e.feeAmount;return Math.round(100*t)/100}(function(n){var t=(n+e.feeAmount)/(1-e.feePercent);return Math.round(100*t)/100}(t))).toFixed(2)},f=function(n){return e.currencySymbol+parseFloat(n).toLocaleString("en",{minimumFractionDigits:2,maximumFractionDigits:2})},_=function(){r.each((function(){var n=$(this).attr("id");"donation_amount_other"!==n&&$(this).val(v()?l[n].valueWithFee:l[n].value)}))},g=function(n){$(".donation-v2-amount .hidden").removeClass("hidden hide"),d.text(n)},p=function(){var n=v()?s(m):m;$('[name="donation[amount]"]').val(n),d.text(n),$(".single-amount").text(f(n))},F=function(){_(),t&&(v()?c.trigger("set:amount",c.val()):c.trigger("set:amount",t))};a.on("change",(function(){var n=i.attr("data-placeholder");"donation_donation_occurrence_monthly"===$(this).attr("id")?i.removeClass("hidden").html(n):i.addClass("hidden").html(null)})),m?h.on("change",p):(c.val()&&(t=c.val()),r.each((function(){var n=$(this).attr("id");"donation_amount_other"!==n&&(l[$(this).attr("id")]={value:$(this).val(),valueWithFee:s($(this).val())},$(this).on("change",(function(){c.trigger("set:amount",l[n].value)})))})),c.on("change",(function(){u.prop("checked",!0),c.trigger("set:amount",$(this).val())})),u.on("click",(function(){c.val(""),c.focus()})),h.on("change",F),$(document).on("set:amount",(function(n,o){t=o;var e=v()?s(o):parseFloat(o).toFixed(2);c.val(e),g(e)})))};